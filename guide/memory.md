# 内存目标检查

内存目标跟踪伸缩策略通过监控内存使用率，自动调整实例数量。

## 配置查看与修改

您可以通过弹性伸缩（UAS）控制台，伸缩组的详情，规则信息部分，查看内存目标检查**是否开启**。

通过点击更改规则修改相关设置，包括开启与关闭，以及目标值。
![更改规则](https://www-s.ucloud.cn/2025/12/3220015a1a7ba87378653990308b8235_1766645339105.png)


## 核心计算逻辑
内存目标跟踪伸缩策略根据伸缩组内云主机的内存使用率，自动调整实例数量，维持设定的目标内存使用率。

系统定期采集伸缩组内云主机的内存指标，并通过以下公式计算出负载比率。指标过滤机制同CPU目标检查。

```
负载比率 = 实际平均利用率 / 目标阈值
```

- **稳定区**：比率在 0.9 ~ 1.0 之间时，视为系统运行平稳，不触发伸缩。
- **触发区**：当比率低于 0.9 时触发缩容；高于 1.0 时触发扩容。 (注：实际平均利用率为 UAS 内所有主机的指标均值)


## 伸缩行为

### 扩容触发条件
- **实例数量在界限内**：伸缩后的实例数量未超出配置的最小/最大实例数限制
- **负载比率 > 1.0**（即实际负载超过目标值）
- **不在冷却期内**：当前伸缩组已度过上一轮操作的冷却时间，处于就绪状态

### 缩容触发条件
- **实例数量在界限内**：伸缩后的实例数量未超出配置的最小/最大实例数限制
- **负载比率 < 0.9**（即实际负载低于目标值的 90%）
- **不在冷却期内**：当前伸缩组已度过上一轮操作的冷却时间，处于就绪状态

注：比率在 0.9 ~ 1.0 之间时视为**平稳状态**，不触发伸缩。

### 边界调整场景
当实例数超出配置的最小/最大限制时，系统会立即调整，不受内存使用率影响：

- **低于最小值**：立即扩容至最小实例数
- **高于最大值**：立即缩容至最大实例数

## 注意事项

- 内存指标**强依赖**安装监控agent，请确保主机模版中配置的镜像内安装了agent并设置开机自启动。

- 内存目标检查规则与CPU目标检查规则独立存在于伸缩组规则中，可分别启用或禁用，互不影响。






